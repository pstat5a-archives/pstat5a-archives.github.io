{"title":"Lab09","markdown":{"yaml":{"title":"Lab09","subtitle":"Exploring a Real-World Dataset","author":[{"name":"PSTAT 5A, with Ethan Marzban","affiliations":[{"name":"Spring 2023"}]}],"author-title":"Course","affiliation-title":"Quarter","format":"html","title-block-banner":"#4144a6","css":"styles.css"},"headingText":"Introduction to the Dataset","containsRefs":false,"markdown":"\n\n------------------------------------------------------------------------\n\nIn this week's lab, we will explore a real-world dataset.\n\n\nThe dataset we will explore is called `air22.csv`, and can be accessed at [https://pstat5a.github.io/Files/Datasets/air22.csv](https://pstat5a.github.io/Files/Datasets/air22.csv). It contains observations from the Bureau of Transportation Statistics [https://www.transtats.bts.gov/](https://www.transtats.bts.gov/) on flights taking place during 2022.\n\nHere is an abridged version of the data dictionary:\n\n- `year`: the year in which the data was collected\n- `month`: the month in which the data was collected\n- `carrier`: the carrier abbreviation (e.g. `AS` for Alaska, `AA` for American Airlines, etc.)\n- `carrier_name`: the full name of the carrier (e.g. Alaska, American, etc.)\n- `airport`: the airport IATA code (e.g. `SEA` for SeaTac International Airport, etc.)\n- `airport_name`: the full name of the airport\n- `arr_flights`: the number of flights that arrived\n- `arr_del15`: the number of flights that were delayed for more than 15 minutes\n- `carrier_ct`: the number of flights delayed due to carrier-related issues (e.g. no crew, delayed captain, etc.)\n- `weather_ct`: the number of flights delayed due to weather-related issues\n- `nas_ct`: the number of flights delayed due to National Air Security (NAS)-related issues (e.g. heavy traffic)\n- `security_ct`: the number of flights **cancelled** due to security-related issues\n- `late_aircraft_ct`: the number of flights delayed due to the arriving aircraft being delayed\n- `arr_cancelled`: the number of cancelled flights\n- `arr_diverted`: the number of flights that were diverted \n- `arr_delay`: the total time (in minutes) of delayed flight\n- `carrier_delay`: the total time (in minutes) of delay due to air carrier-related issues\n- `weather_delay`: the total time (in minutes) of delay due to air weather-related issues\n- `nas_delay`: the total time (in minutes) of delay due to air NAS-related issues\n- `security_delay`: the total time (in minutes) of delay due to air security-related issues\n- `late_aircraft_delay`: the total time (in minutes) of delay due to the arriving aircraft being delayed\n\n## Part 1: Importing \n\nWe should start by importing the dataset into our JupyterHub environment! In this class, we will almost exclusively import datasets to `datascience` tables (remember those, from Lab 1?) The syntax we use to import a dataset and store it in a table called `table_name` is:\n```{python}\n#| eval: False\n#| echo: True\ntable_name = Table.read_table(<location of dataset>)\n```\n\nBy default, the `read_table` method will use the first line of data as labels for each of the columns. If, however, your data does not include labels as its first line you will need to manually specify the labels:\n```{python}\n#| eval: False\n#| echo: True\ntable_name = Table.read_table(<location of dataset>, names = [labl1, ...])\n```\n\n:::{.callout-important}\n## Action Item\nImport the `air22.csv` dataset, and save it as a table called `air`. **Hint:** make sure you import any necessary modules first!\n:::\n\n:::{.callout-tip}\nThe list of `Table()`-related methods at [http://data8.org/datascience/tables.html](http://data8.org/datascience/tables.html) may prove very useful for this lab!\n:::\n\n## Part 2: Getting a Feel for the Dataset\n\nLet's start of easy by answering a few questions. You should use code to determine the answers to these questions, but should write your answers using descriptive sentences in a markdown cell.\n\n:::{.callout-important}\n## Action Item\nHow many rows are in the dataset? (Recall: in the language introduced in Week 1, this is the number of **observational units** in the **data matrix**.)\n:::\n\n:::{.callout-important}\n## Action Item\nHow many columns are in the dataset? (Recall: in the language introduced in Week 1, this is the number of **variables** in the data matrix.)\n:::\n\n:::{.callout-important}\n## Action Item\nReturn a list of the column names in the dataset. **Hint:** Recall that the column names, in the context of the `datascience` module, are sometimes called the **labels** of the table. Again, consult the help file if you need help!\n:::\n\n\n## Part 3: Accessing Specific Elements of the Dataset\n\nThere are a few methods we can use to access specific parts of a Table:\n\n- `table_name.column(<index or label>)`: returns an array containing the data in the specified column\n- `table_name.row(<index or label>)`: returns an array containing the data in the specified column\n- `table_name.column(i).item(j)`: returns the value in column `i` + 1, row `j` + 1 (note the plus ones!)\n\n\n:::{.callout-important}\n## Action Item\nDisplay only the `arr_del15` column of the dataset.\n:::\n\n:::{.callout-important}\n## Action Item\nWhat years are included in the dataset?\n:::\n\n:::{.callout-important}\n## Action Item\nCreate a histogram of the delay times caused by weather-related issues. Use 100 bins, and include axis labels as well as a plot title.\n:::\n\nWe can also get creative, and use comparisons to subset various parts of our dataset. For example,\n\n```{python}\n#| echo: True\n#| eval: False\nair.column(\"carrier\") == \"AS\"\n```\nwill return a Boolean vector (i.e. a vector of `True` and `False` elements), with `True` elements corresponding to values in the `carrier` column that have value `\"AS\"`. In words: this would give us the indices of rows corresponding to data on Alaska Airlines.\n\n:::{.callout-important}\n## Action Item\nHow many observational units were recorded from Alaska Airlines? **Hint:** Think about how a sum could help us here.\n:::\n\n## Part 5: A Mini-Project\n\nAlright, let's close off this lab with a bit of a mini-project. Our goal is to examine the number of arrivals over time. Specifically, we would ultimately like to plot the average number of arrivals per month vs. month.\n\n:::{.callout-important}\n## Action Item\nExplain, in words, what the following line of code is doing:\n```{python}\n#| eval: False\n\nair.row(air.column(1) == 1)\n```\n:::\n\n:::{.callout-important}\n## Action Item\nExplain, in words, what the following line of code is doing:\n```{python}\n#| eval: False\n\nair.row(air.column(1) == 2)[6]\n```\n**Hint:** `arr_flights` is the 7th column in the dataset.\n:::\n\n\n:::{.callout-important}\n## Action Item\nBased on your answers to the previous two Action Items, complete the following code to compute the average number of flights per month:\n\n```{python}\n#| eval: False\n#| echo: True\n\nmeans = []\nfor k in _________________:\n  means.______(np.nanmean(air.row(air.column(___) == ___)[___]))\n```\n(By the way, the `nanmeans()` function is a variant of the `mean()` function from the `numpy` module that ignores missing values when computing the mean.)\n:::\n\n\n:::{.callout-important}\n## Action Item\nPlot your `means` list against the list containing the integers `1`, `2`, `3`, ..., `12` (this list functions like a list of month names.)\n:::\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../../styles.css","styles.css"],"toc":true,"output-file":"Lab09.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","theme":"sandstone","title":"Lab09","subtitle":"Exploring a Real-World Dataset","author":[{"name":"PSTAT 5A, with Ethan Marzban","affiliations":[{"name":"Spring 2023"}]}],"author-title":"Course","affiliation-title":"Quarter","title-block-banner":"#4144a6"},"extensions":{"book":{"multiFile":true}}}}}